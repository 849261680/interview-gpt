# Interview-GPT 语音面试功能说明

## 🎤 功能概述

Interview-GPT 现已支持完整的语音面试功能，包括：

- **语音识别 (ASR)**: 将用户的语音转换为文字
- **语音合成 (TTS)**: 将面试官的回复转换为语音播放
- **实时录音**: 支持高质量音频录制
- **音量检测**: 实时显示录音音量
- **多语言支持**: 支持中文语音识别和合成

## 🚀 功能特性

### 语音录制
- 🎙️ 一键开始/停止录音
- ⏱️ 实时录音时长显示
- 📊 音量可视化指示器
- 🔴 录音状态动画效果

### 语音识别
- 🧠 智能语音转文字
- 📝 识别结果置信度显示
- 🔄 自动重试机制
- ⚡ 快速响应处理

### 语音合成
- 🔊 面试官回复语音播放
- 🎛️ 可调节语音参数（语速、音调、音量）
- 🎭 多种语音角色支持
- ⏸️ 随时停止播放

### 用户体验
- 🎨 现代化UI设计
- 📱 响应式布局
- 🌟 流畅动画效果
- 🔧 语音功能开关

## 📋 使用指南

### 1. 开始面试
1. 访问面试页面：`http://localhost:3011/interview/[id]`
2. 点击左侧"开始面试"按钮
3. 系统会自动请求麦克风权限

### 2. 语音回答
1. 确保语音功能已开启（🔊 图标为绿色）
2. 点击麦克风按钮 🎤 开始录音
3. 说出你的回答
4. 再次点击停止录音 ⏹️
5. 系统自动识别并显示文字

### 3. 听取问题
1. 面试官的问题会自动语音播放
2. 可以点击消息旁的 🔊 按钮重新播放
3. 播放时可以点击"停止"按钮中断

### 4. 控制选项
- **语音开关**: 点击 🔊/🔇 按钮开启/关闭语音功能
- **录音状态**: 录音时显示红色指示器和时长
- **音量指示**: 录音时显示实时音量条
- **播放控制**: 播放时显示蓝色指示器和停止按钮

## 🛠️ 技术实现

### 前端技术栈
- **React + TypeScript**: 主要框架
- **Web Audio API**: 音频处理
- **MediaRecorder API**: 录音功能
- **Speech Synthesis API**: 语音合成
- **内联样式**: 确保样式兼容性

### 语音服务架构
```typescript
// 语音服务接口
interface VoiceService {
  speechToText(audioBlob: Blob): Promise<ASRResult>
  textToSpeech(text: string, options?: TTSOptions): Promise<void>
  getAvailableVoices(): SpeechSynthesisVoice[]
  stopSpeaking(): void
}
```

### 支持的音频格式
- **录音格式**: WebM (Opus编码)
- **采样率**: 48kHz
- **声道**: 单声道
- **比特率**: 自适应

## 🔧 配置选项

### 语音识别配置
```typescript
const asrConfig = {
  language: 'zh-CN',           // 识别语言
  continuous: false,           // 连续识别
  interimResults: false,       // 中间结果
  maxAlternatives: 1          // 最大候选数
}
```

### 语音合成配置
```typescript
const ttsConfig = {
  language: 'zh-CN',          // 合成语言
  rate: 0.9,                  // 语速
  pitch: 1.0,                 // 音调
  volume: 0.8                 // 音量
}
```

## 🌐 浏览器兼容性

### 支持的浏览器
- ✅ Chrome 25+
- ✅ Firefox 44+
- ✅ Safari 14.1+
- ✅ Edge 79+

### 功能支持
| 功能 | Chrome | Firefox | Safari | Edge |
|------|--------|---------|--------|------|
| 录音 | ✅ | ✅ | ✅ | ✅ |
| 语音识别 | ✅ | ❌ | ✅ | ✅ |
| 语音合成 | ✅ | ✅ | ✅ | ✅ |

## 🔒 隐私与安全

### 数据处理
- 🔐 录音数据仅在本地处理
- 🚫 不会永久存储音频文件
- 🛡️ 语音识别可选择本地或云端处理
- 🔒 所有传输数据均加密

### 权限管理
- 🎤 需要用户明确授权麦克风权限
- 🔊 语音播放无需特殊权限
- ⚙️ 用户可随时关闭语音功能
- 🔄 权限状态实时显示

## 🐛 故障排除

### 常见问题

**Q: 无法录音怎么办？**
A: 检查浏览器麦克风权限，确保没有其他应用占用麦克风

**Q: 语音识别不准确？**
A: 确保环境安静，说话清晰，可以尝试重新录音

**Q: 语音播放没有声音？**
A: 检查系统音量设置，确保浏览器未被静音

**Q: 录音按钮无响应？**
A: 刷新页面重新授权麦克风权限

### 错误代码
- `ASR_001`: 麦克风权限被拒绝
- `ASR_002`: 语音识别服务不可用
- `TTS_001`: 语音合成不支持
- `AUDIO_001`: 音频设备错误

## 🚀 未来规划

### 即将推出
- 🌍 多语言语音识别支持
- 🎭 更多语音角色选择
- 📊 语音质量评估
- 🔄 实时语音转文字
- 📱 移动端优化

### 长期目标
- 🤖 AI语音情感分析
- 📈 语音表现评分
- 🎯 个性化语音训练
- 🔗 第三方语音服务集成

## 📞 技术支持

如果您在使用语音功能时遇到问题，请：

1. 查看浏览器控制台错误信息
2. 确认浏览器版本和兼容性
3. 检查网络连接状态
4. 联系技术支持团队

---

**注意**: 语音功能需要现代浏览器支持，建议使用最新版本的 Chrome、Firefox、Safari 或 Edge 浏览器以获得最佳体验。 